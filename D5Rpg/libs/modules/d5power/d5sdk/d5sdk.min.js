function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var i="",n=0,r=t.length;r>n;n++)i+=t[n]+" ";console.log(i)}var d5power;!function(t){var e=function(){function t(){this._link=0,this._waiterList=new Array}var e=__define,i=t;return p=i.prototype,t.setupUnknow=function(e){null!=e&&(e._offsetX=-(e._bitmapWidth>>1),e._offsetY=-e._bitmapHeight,t._unknow=e)},t.getInstance=function(e,i){var n;return null!=t._pool_inuse[e]?(n=t._pool_inuse[e],n._link++,1==n._link&&n.setup(e)):(n=t._pool_jale.length>0?t._pool_jale.pop():new t,n._link++,n.setup(e)),null==n._sheet?n.addWaiter(i):i.onSpriteSheepReady(n),n.loadID=i.loadID,n},t.back2pool=function(e){t._pool_inuse[e._name]=null,t._pool_jale.length<t.MAX_IN_JALE&&-1==t._pool_jale.indexOf(e)&&t._pool_jale.push(e)},e(p,"name",function(){return this._name}),e(p,"renderTime",function(){return this._renderTime}),e(p,"totalFrame",function(){return this._totalFrame}),e(p,"totalDirection",function(){return this._totalDirection}),e(p,"shadowX",function(){return this._shadowX}),e(p,"shadowY",function(){return this._shadowY}),e(p,"gX",function(){return this._gX}),e(p,"gY",function(){return this._gY}),e(p,"uvList",function(){return this._uvList}),e(p,"frameWidth",function(){return this._frameW}),e(p,"frameHeight",function(){return this._frameH}),p.addWaiter=function(t){-1==this._waiterList.indexOf(t)&&this._waiterList.push(t)},p.setup=function(e){".png"==e.substr(-4,4)?this._name=e.substr(0,e.length-4):(this._name=e,e+=".png"),t._pool_inuse[this._name]=this,RES.getResByUrl(e,this.onTextureComplete,this)},p.unlink=function(){this._link--,this._link<0&&(this._link=0),0==this._link&&(this._sheet=null,this._waiterList=[],t._pool_inuse[this._name]=null,t.back2pool(this))},p.onTextureComplete=function(t){0!=this._link&&(this._sheet=new egret.SpriteSheet(t),RES.getResByUrl(this._name+".json",this.onDataComplate,this))},p.getTexture=function(e,i){return null==this._sheet?t._unknow:this._sheet.getTexture("frame"+e+"_"+i)},p.onDataComplate=function(t){if(0==this._link)return void(this._sheet=null);switch(this._totalFrame=parseInt(t.Frame),this._renderTime=parseInt(t.Time),this._shadowX=parseInt(t.shadowX),this._shadowY=parseInt(t.shadowY),this._shadowY>=this._shadowX&&(this._shadowY=.5*t.shadowX),this._totalDirection=parseInt(t.Direction),parseInt(t.Direction)){case 1:this._totalDirection=1;break;case 5:this._totalDirection=8;break;case 3:this._totalDirection=4}this._gX=parseInt(t.X),this._gY=parseInt(t.Y),this._frameW=parseInt(t.FrameWidth),this._frameH=parseInt(t.FrameHeight),this._uvList=t.uv?t.uv:null;var e,i;if(t.uv)for(i=0;i<this._totalDirection;i++)for(e=0;e<this._totalFrame;e++){var n=5>i?i:8-i,r=t.uv[n*this._totalFrame+e];null==r?console.log("[D5SpriteSheepINIT] can not find uv config line:",i,",frame:",e,"==========================="):(r.offY==-r.height&&(r.offY+=.01),this._sheet.createTexture("frame"+i+"_"+e,e*t.FrameWidth+r.x,i*t.FrameHeight+r.y,r.width,r.height,0,0))}else for(i=0;i<this._totalDirection;i++)for(e=0;e<this._totalFrame;e++)this._sheet.createTexture("frame"+i+"_"+e,e*t.FrameWidth,i*t.FrameHeight,t.FrameWidth,t.FrameHeight,0,0);for(;this._waiterList.length>0;){var s=this._waiterList.pop();s.loadID==this.loadID&&s.onSpriteSheepReady(this)}},t.MAX_IN_JALE=200,t._pool_inuse={},t._pool_jale=new Array,t}();t.D5SpriteSheet=e,egret.registerClass(e,"d5power.D5SpriteSheet",["d5power.IDisplayer"])}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function t(){this.offX=0,this.offY=0,this.width=0,this.height=0}var e=(__define,t);return p=e.prototype,p.format=function(t){this.offX=parseInt(t.offX),this.offY=parseInt(t.offY),this.width=parseInt(t.width),this.height=parseInt(t.height),this.u=t.u,this.v=t.v,this.w=t.w,this.h=t.h,this.x=t.x,this.y=t.y},t}();t.UVData=e,egret.registerClass(e,"d5power.UVData")}(d5power||(d5power={}));